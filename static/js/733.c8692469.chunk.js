"use strict";(self.webpackChunkreact_website=self.webpackChunkreact_website||[]).push([[733],{215:(e,s,a)=>{a.d(s,{A:()=>c});const t={getCurrentPosition:async e=>new Promise((s,a)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(s,e=>a(e),e):a({code:"UNSUPPORTED",message:"Geolocation not supported"})}),async watchPosition(e,s){if(!navigator.geolocation)return null;return navigator.geolocation.watchPosition(e=>s(e,null),e=>s(null,e),e)},async clearWatch(e){let{id:s}=e;null!=s&&navigator.geolocation&&navigator.geolocation.clearWatch(s)}},n=!1,i=()=>"web",o=async()=>{};const c=new class{constructor(){this.isNative=n,this.platform=i(),this.permissionStatus=null,this.locationWatchId=null}async ensureHighAccuracy(){var e,s,a;if(!this.isNative||"android"!==this.platform)return;const t=null===(e=window)||void 0===e||null===(s=e.cordova)||void 0===s||null===(a=s.plugins)||void 0===a?void 0:a.locationAccuracy;return t?new Promise(e=>{try{t.canRequest(s=>{if(!s)return e(!1);t.request(t.REQUEST_PRIORITY_HIGH_ACCURACY,()=>{console.log("[LocationService] High-accuracy location enabled"),e(!0)},s=>{console.warn("[LocationService] High-accuracy request failed",s),e(!1)})})}catch(s){console.warn("[LocationService] ensureHighAccuracy exception",s),e(!1)}}):void 0}async checkPermissionStatus(){try{if(navigator.permissions){return(await navigator.permissions.query({name:"geolocation"})).state}return"prompt"}catch(e){return console.error("Permission check error:",e),"prompt"}}async requestPermission(){try{const s=await this.checkPermissionStatus();if("granted"===s)return{status:"granted",needsSettings:!1};if("denied"===s)return{status:"denied",needsSettings:!0};try{return await this.getCurrentLocation(),{status:"granted",needsSettings:!1}}catch(e){if(1===e.code||"PERMISSION_DENIED"===e.code)return{status:"denied",needsSettings:!0};throw e}}catch(e){return console.error("Permission request error:",e),{status:"error",error:e.message,needsSettings:!1}}}async getCurrentLocation(){const e={enableHighAccuracy:!0,timeout:1e4,maximumAge:0,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};try{const s=await t.getCurrentPosition(e);return{latitude:s.coords.latitude,longitude:s.coords.longitude,accuracy:s.coords.accuracy,timestamp:s.timestamp}}catch(s){throw this.handleLocationError(s)}}async watchLocation(e){const s={enableHighAccuracy:!0,timeout:1e4,maximumAge:0,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}};try{return this.locationWatchId=await t.watchPosition(s,(s,a)=>{a?e(null,this.handleLocationError(a)):e({latitude:s.coords.latitude,longitude:s.coords.longitude,accuracy:s.coords.accuracy,timestamp:s.timestamp},null)}),this.locationWatchId}catch(a){throw this.handleLocationError(a)}}async clearWatch(){this.locationWatchId&&(await t.clearWatch({id:this.locationWatchId}),this.locationWatchId=null)}async openAppSettings(){if(this.isNative&&"android"===this.platform)try{return await o(),!0}catch(e){return console.error("Failed to open settings:",e),!1}return!1}handleLocationError(e){const s={1:{code:"PERMISSION_DENIED",message:"Location permission denied"},2:{code:"POSITION_UNAVAILABLE",message:"Location unavailable"},3:{code:"TIMEOUT",message:"Location request timed out"}};return e.code&&s[e.code]?{...s[e.code],originalError:e}:{code:"UNKNOWN_ERROR",message:e.message||"Unknown location error",originalError:e}}async getAddressFromCoords(e,s){try{var a,t;if(null!==(a=window.google)&&void 0!==a&&null!==(t=a.maps)&&void 0!==t&&t.Geocoder){const a=new window.google.maps.Geocoder,t=await new Promise(t=>{a.geocode({location:{lat:e,lng:s}},(e,s)=>{if("OK"===s&&e&&e.length>0){var a,n,i,o,c;const s=e[0];t({formatted:s.formatted_address,components:{area:(null===(a=s.address_components.find(e=>e.types.includes("sublocality")))||void 0===a?void 0:a.long_name)||"",city:(null===(n=s.address_components.find(e=>e.types.includes("locality")))||void 0===n?void 0:n.long_name)||"",state:(null===(i=s.address_components.find(e=>e.types.includes("administrative_area_level_1")))||void 0===i?void 0:i.long_name)||"",country:(null===(o=s.address_components.find(e=>e.types.includes("country")))||void 0===o?void 0:o.long_name)||"",pincode:(null===(c=s.address_components.find(e=>e.types.includes("postal_code")))||void 0===c?void 0:c.long_name)||""}})}else t(null)})});if(t)return t}}catch(i){}try{const a="AIzaSyC62wo52XfJDOBnJc6VAQDDbse3a-KKy-k",t=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${e},${s}&key=${a}`);if(t.ok){var n;const e=null===(n=(await t.json()).results)||void 0===n?void 0:n[0];if(e)return{formatted:e.formatted_address,components:{}}}}catch(o){}return null}async isLocationEnabled(){if(this.isNative)try{return await this.getCurrentLocation({timeout:2e3}),!0}catch(e){return"POSITION_UNAVAILABLE"!==e.code}return!0}}},733:(e,s,a)=>{a.r(s),a.d(s,{default:()=>h});var t=a(43),n=a(615),i=a(788),o=a(196),c=a(667),r=a(215),l=a(579);const d=e=>{let{isOpen:s,onClose:a,onLocationSelect:i}=e;const d=(0,n.Zp)(),[u,m]=(0,t.useState)(null);(0,t.useEffect)(()=>{const e=o.j2.onAuthStateChanged(m);return()=>e&&e()},[]);const[h,p]=(0,t.useState)(!1),[v,g]=(0,t.useState)([]),[x,N]=(0,t.useState)("checking"),[j,y]=(0,t.useState)(null),[b,f]=(0,t.useState)(null),[w,S]=(0,t.useState)(!1),k={checking:{icon:"\u23f3",title:"Checking Location Access...",subtitle:"Please wait while we check your location settings",primaryButton:null,showManual:!1},prompt:{icon:"\ud83d\udccd",title:"Select Your Location",subtitle:"Choose from saved addresses, detect current location, or add a new address",primaryButton:{text:"Use Current Location",action:C},showManual:!0},granted:{icon:"\u2705",title:"Detecting your location...",subtitle:"Please wait while we find your current location",primaryButton:null,showManual:!1},denied:{icon:"\ud83d\udeab",title:"Location Permission Denied",subtitle:"You can enable location from your device settings or enter your address manually",primaryButton:{text:"\u2699\ufe0f Open Settings",action:async function(){await r.A.openAppSettings()?N("settings"):alert("Please go to Settings > Apps > DhipyCare > Permissions > Location and enable location access")}},showManual:!0},settings:{icon:"\u2699\ufe0f",title:"Enable Location in Settings",subtitle:"Go to Settings > Apps > DhipyCare > Permissions > Location and enable it",primaryButton:{text:"\ud83d\udd04 I've Enabled It",action:async function(){await async function(){N("checking");try{const e=await r.A.checkPermissionStatus();console.log("Initial permission status:",e),"granted"===e?C():N("prompt")}catch(e){console.error("Permission check error:",e),N("prompt")}}()}},showManual:!0},error:{icon:"\u274c",title:"Unable to get location",subtitle:j||"Please check your internet connection and try again",primaryButton:{text:"\ud83d\udd04 Retry",action:async function(){p(!0),y(null);try{const e=await r.A.requestPermission();console.log("Permission request result:",e),"granted"===e.status?C():"denied"===e.status&&(p(!1),y("Location permission was denied. Please allow location access."),N("prompt"),N("error"))}catch(e){console.error("Permission request error:",e),y("Failed to request permission"),N("error"),p(!1)}}},showManual:!0}};async function C(){N("granted"),p(!0),y(null);const e=setTimeout(()=>{console.error("Location detection timeout"),y("Location detection is taking too long. Please try again."),N("error"),p(!1)},3e4);try{var s,t,n,o;if(!await r.A.isLocationEnabled())throw clearTimeout(e),new Error("Location services are disabled");const l=await r.A.getCurrentLocation({enableHighAccuracy:!0,timeout:2e4,maximumAge:0});if(clearTimeout(e),console.log("Got location:",l),!l)throw new Error("Location not available");const d=await r.A.getAddressFromCoords(l.latitude,l.longitude),u={lat:l.latitude,lng:l.longitude,address:(null===d||void 0===d?void 0:d.formatted)||`${l.latitude.toFixed(4)}, ${l.longitude.toFixed(4)}`,name:(null===d||void 0===d?void 0:d.formatted)||(null===d||void 0===d||null===(s=d.components)||void 0===s?void 0:s.area)||(null===d||void 0===d||null===(t=d.components)||void 0===t?void 0:t.city)||"Current Location",area:(null===d||void 0===d||null===(n=d.components)||void 0===n?void 0:n.area)||"",city:(null===d||void 0===d||null===(o=d.components)||void 0===o?void 0:o.city)||"",type:"current"};try{localStorage.setItem("userLocation",JSON.stringify(u))}catch(c){}window.dispatchEvent(new CustomEvent("locationUpdated",{detail:u})),window.dispatchEvent(new CustomEvent("userLocationUpdated",{detail:u})),f(u),setTimeout(()=>{i(u),a()},600)}catch(l){clearTimeout(e),console.error("Location error:",l),"PERMISSION_DENIED"===l.code?(y("Location permission denied. Please allow location access and try again."),N("error")):"POSITION_UNAVAILABLE"===l.code?(y("Location services are turned off on your device"),N("error")):"TIMEOUT"===l.code?(y("Location request timed out. Please try again"),N("error")):(y(l.message||"Unable to get your location"),N("error")),p(!1)}}if((0,t.useEffect)(()=>{s&&(N("prompt"),u&&async function(){try{const e=(0,c.rJ)(o.db,"users",u.uid,"addresses"),s=(await(0,c.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));g(s)}catch(e){console.error("Error fetching addresses:",e)}}())},[s,u]),!s)return null;const L=k[x]||k.prompt,E=w?v:v.slice(0,2);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"location-popup-overlay",onClick:a,children:(0,l.jsxs)("div",{className:"location-popup",onClick:e=>e.stopPropagation(),children:[(0,l.jsx)("button",{className:"location-popup-close",onClick:a,children:"\u2715"}),(0,l.jsxs)("div",{className:"location-popup-content",children:[(0,l.jsx)("div",{className:"location-popup-icon",children:L.icon}),(0,l.jsx)("h2",{className:"location-popup-title",children:L.title}),(0,l.jsx)("p",{className:"location-popup-subtitle",children:L.subtitle}),b&&(0,l.jsxs)("div",{className:"detected-location",children:[(0,l.jsx)("div",{className:"detected-location-icon",children:"\ud83d\udccd"}),(0,l.jsxs)("div",{className:"detected-location-details",children:[(0,l.jsx)("div",{className:"detected-location-area",children:b.area||"Current Location"}),(0,l.jsx)("div",{className:"detected-location-address",children:b.address})]}),(0,l.jsx)("div",{className:"detected-location-loader"})]}),L.primaryButton&&(0,l.jsx)("button",{className:"location-popup-primary-btn",onClick:L.primaryButton.action,disabled:h,children:h?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"button-loader"}),"Detecting location..."]}):L.primaryButton.text}),L.showManual&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"location-popup-divider",children:(0,l.jsx)("span",{children:"OR"})}),(0,l.jsxs)("button",{className:"location-popup-manual-btn",onClick:function(){d("/select-location"),a()},children:[(0,l.jsx)("span",{className:"manual-icon",children:"\ud83d\udd0d"}),(0,l.jsx)("span",{children:"Search your location manually"}),(0,l.jsx)("span",{className:"arrow",children:"\u2192"})]})]}),v.length>0&&L.showManual&&(0,l.jsxs)("div",{className:"saved-addresses-section",children:[(0,l.jsx)("h3",{className:"saved-addresses-title",children:"SAVED ADDRESSES"}),E.map(e=>(0,l.jsxs)("button",{className:"saved-address-item",onClick:()=>function(e){const s={address:e.address,name:e.label,lat:e.lat,lng:e.lng,area:e.area||"",city:e.city||"",type:"saved"};localStorage.setItem("userLocation",JSON.stringify(s)),window.dispatchEvent(new CustomEvent("locationUpdated",{detail:s})),console.log("\ud83d\udccd Saved address selected and event dispatched:",s),i(s),a()}(e),children:[(0,l.jsx)("div",{className:"address-icon",children:"home"===e.type?"\ud83c\udfe0":"work"===e.type?"\ud83d\udcbc":"\ud83d\udccd"}),(0,l.jsxs)("div",{className:"address-details",children:[(0,l.jsx)("div",{className:"address-label",children:e.label}),(0,l.jsx)("div",{className:"address-text",children:e.address})]}),(0,l.jsx)("span",{className:"arrow",children:"\u2192"})]},e.id)),v.length>2&&(0,l.jsx)("button",{className:"view-more-btn",onClick:()=>S(!w),children:w?"View Less":`View ${v.length-2} More`})]})]}),(0,l.jsx)("div",{className:"location-popup-footer",children:(0,l.jsx)("p",{children:"\ud83d\udd12 Your location data is secure and only used for service delivery"})})]})})})},u=()=>{const e=(0,n.Zp)(),s=(0,n.zy)(),[a,i]=(0,t.useState)(null),[r,d]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=o.j2.onAuthStateChanged(async e=>{if(!e)return i(null),void d(!1);try{const s=await(0,c.x7)((0,c.H9)(o.db,"users",e.uid)),a=(s.exists()?s.data():{}).photoURL||e.photoURL||null;i(a),d(!1)}catch(s){i(null)}});return()=>e()},[]);return(0,l.jsx)("nav",{className:"bottom-navbar",children:(0,l.jsx)("div",{className:"nav-container",children:[{id:"home",label:"Home",icon:"\ud83c\udfe0",path:"/home"},{id:"search",label:"Search",icon:"\ud83d\udd0d",path:"/search"},{id:"book",label:"Book",icon:"\u2795",path:"/book-service"},{id:"chat",label:"Chat",icon:"\ud83d\udcac",path:"/chat"},{id:"profile",label:"Profile",icon:"\ud83d\udc64",path:"/profile"}].map(t=>(0,l.jsxs)("button",{className:"nav-item "+(s.pathname===t.path?"active":""),onClick:()=>{return s=t.path,void e(s);var s},children:[(0,l.jsx)("span",{className:"nav-icon",children:"profile"===t.id&&a&&!r?(0,l.jsx)("img",{src:a,alt:"Profile",className:"nav-avatar",onError:()=>d(!0)}):t.icon}),(0,l.jsx)("span",{className:"nav-label",children:t.label})]},t.id))})})},m=e=>{let{buddy:s,onClick:a}=e;return(0,l.jsxs)("div",{className:"buddy-card",onClick:()=>a&&a(s),children:[(0,l.jsxs)("div",{className:"buddy-card-header",children:[(0,l.jsx)("img",{src:s.profilePicture||"/buddy_logo.png",alt:s.name,className:"buddy-avatar"}),(0,l.jsxs)("div",{className:"buddy-info",children:[(0,l.jsx)("h3",{className:"buddy-name",children:s.name}),(0,l.jsx)("p",{className:"buddy-service",children:s.service})]}),(0,l.jsxs)("div",{className:"buddy-rating",children:[(0,l.jsx)("span",{className:"star",children:"\u2b50"}),(0,l.jsx)("span",{className:"rating-value",children:s.rating})]})]}),(0,l.jsxs)("div",{className:"buddy-card-body",children:[(0,l.jsx)("div",{className:"buddy-tags",children:s.tags&&s.tags.map((e,s)=>(0,l.jsx)("span",{className:"tag",children:e},s))}),(0,l.jsxs)("div",{className:"buddy-stats",children:[(0,l.jsxs)("div",{className:"stat",children:[(0,l.jsx)("span",{className:"stat-icon",children:"\u2713"}),(0,l.jsxs)("span",{className:"stat-value",children:[s.completedJobs||0," jobs"]})]}),(0,l.jsxs)("div",{className:"stat",children:[(0,l.jsx)("span",{className:"stat-icon",children:"\ud83d\udccd"}),(0,l.jsxs)("span",{className:"stat-value",children:[s.distance||"0.5"," km"]})]}),(0,l.jsxs)("div",{className:"stat",children:[(0,l.jsx)("span",{className:"stat-icon",children:"\ud83d\udcb0"}),(0,l.jsxs)("span",{className:"stat-value",children:["\u20b9",s.price||"200","/hr"]})]})]})]}),(0,l.jsx)("div",{className:"buddy-card-footer",children:(0,l.jsx)("button",{className:"view-profile-btn",children:"View Profile"})})]})},h=()=>{const e=(0,n.Zp)(),[s,a]=(0,t.useState)(null),[r,h]=(0,t.useState)([]),[p,v]=(0,t.useState)([]),[g,x]=(0,t.useState)(""),[N,j]=(0,t.useState)(!1),y=[{id:1,name:"Rajesh Kumar",service:"Driver & Transport",rating:4.9,profilePicture:null,tags:["Verified","Quick"],completedJobs:156,distance:"0.5",price:"200"},{id:2,name:"Priya Sharma",service:"Home Cleaning",rating:4.7,profilePicture:null,tags:["Professional","Reliable"],completedJobs:89,distance:"1.2",price:"150"},{id:3,name:"Amit Patel",service:"Electrician",rating:4.8,profilePicture:null,tags:["Expert","24/7"],completedJobs:234,distance:"2.0",price:"300"}],b=[{id:4,name:"Sneha Gupta",service:"Yoga Instructor",rating:5,profilePicture:null,tags:["Certified","Popular"],completedJobs:412,distance:"3.5",price:"500"},{id:5,name:"Vikram Singh",service:"Personal Trainer",rating:4.9,profilePicture:null,tags:["Fitness Expert"],completedJobs:198,distance:"1.8",price:"400"},{id:6,name:"Anita Desai",service:"Tutor - Mathematics",rating:4.8,profilePicture:null,tags:["Experienced","Patient"],completedJobs:167,distance:"2.5",price:"350"}];(0,t.useEffect)(()=>{h(y),v(b)},[]),(0,t.useEffect)(()=>{try{localStorage.getItem("userLocation")||j(!0)}catch(e){j(!0)}},[]),(0,t.useEffect)(()=>{const e=o.j2.onAuthStateChanged(async e=>{try{if(!e)return void x("");const s=(0,c.H9)(o.db,"users",e.uid),a=await(0,c.x7)(s);if(a.exists()){const e=a.data();x(e.fullName||"")}else x("")}catch(s){x("")}});return()=>e()},[]);const f=s=>{e(`/buddy/${s.id}`)};return(0,l.jsxs)("div",{className:"home-page",children:[(0,l.jsx)(i.A,{userName:g,onLocationClick:()=>j(!0)}),(0,l.jsxs)("main",{className:"home-content",children:[(0,l.jsx)("section",{className:"emergency-section",children:(0,l.jsxs)("button",{type:"button",className:"emergency-strip",onClick:()=>{e("/needhelp")},children:[(0,l.jsx)("span",{className:"strip-icon",children:"\ud83d\udcde"}),(0,l.jsx)("span",{className:"strip-text",children:"Emergency? Book instant help"}),(0,l.jsx)("span",{className:"strip-cta",children:"Book now \u2192"})]})}),(0,l.jsxs)("section",{className:"categories-section",children:[(0,l.jsx)("h3",{className:"section-title",children:"What do you need help with?"}),(0,l.jsx)("div",{className:"categories-grid",children:[{id:"transport",icon:"\ud83d\ude97",label:"Transport",color:"#3b82f6"},{id:"repair",icon:"\ud83d\udd27",label:"Repair",color:"#10b981"},{id:"education",icon:"\ud83d\udcda",label:"Education",color:"#8b5cf6"},{id:"home",icon:"\ud83c\udfe0",label:"Home Help",color:"#f59e0b"},{id:"business",icon:"\ud83d\udcbc",label:"Business",color:"#6366f1"},{id:"fitness",icon:"\ud83c\udfcb\ufe0f",label:"Fitness",color:"#ef4444"},{id:"shopping",icon:"\ud83d\uded2",label:"Shopping",color:"#14b8a6"},{id:"more",icon:"\u2795",label:"Other",color:"#64748b"}].map(s=>(0,l.jsxs)("button",{className:"category-item",onClick:()=>(s=>{a(s),e(`/category/${s.id}`)})(s),style:{"--category-color":s.color},children:[(0,l.jsx)("div",{className:"category-icon",children:s.icon}),(0,l.jsx)("span",{className:"category-label",children:s.label})]},s.id))})]}),(0,l.jsxs)("section",{className:"nearby-section",children:[(0,l.jsxs)("div",{className:"section-header",children:[(0,l.jsxs)("h3",{className:"section-title",children:[(0,l.jsx)("span",{className:"location-icon",children:"\ud83d\udccd"}),"Near You (",r.length,")"]}),(0,l.jsx)("button",{className:"see-all-btn",onClick:()=>e("/nearby"),children:"See All \u2192"})]}),(0,l.jsx)("div",{className:"horizontal-scroll",children:(0,l.jsx)("div",{className:"scroll-container",children:r.map(e=>(0,l.jsx)(m,{buddy:e,onClick:f},e.id))})})]}),(0,l.jsxs)("section",{className:"trending-section",children:[(0,l.jsxs)("div",{className:"section-header",children:[(0,l.jsxs)("h3",{className:"section-title",children:[(0,l.jsx)("span",{className:"fire-icon",children:"\ud83d\udd25"}),"Popular This Week"]}),(0,l.jsx)("button",{className:"see-all-btn",onClick:()=>e("/trending"),children:"See All \u2192"})]}),(0,l.jsx)("div",{className:"horizontal-scroll",children:(0,l.jsx)("div",{className:"scroll-container",children:p.map(e=>(0,l.jsx)(m,{buddy:e,onClick:f},e.id))})})]}),(0,l.jsx)("section",{className:"offers-section",children:(0,l.jsxs)("div",{className:"offer-banner",children:[(0,l.jsxs)("div",{className:"offer-content",children:[(0,l.jsx)("h3",{className:"offer-title",children:"\ud83c\udf89 First Booking Offer!"}),(0,l.jsx)("p",{className:"offer-text",children:"Get 20% off on your first buddy booking"}),(0,l.jsx)("button",{className:"offer-btn",children:"Claim Offer"})]}),(0,l.jsx)("div",{className:"offer-decoration",children:(0,l.jsx)("span",{className:"decoration-emoji",children:"\ud83c\udf81"})})]})}),(0,l.jsxs)("section",{className:"how-it-works",children:[(0,l.jsx)("h3",{className:"section-title",children:"How Buddy Works"}),(0,l.jsxs)("div",{className:"steps-container",children:[(0,l.jsxs)("div",{className:"step",children:[(0,l.jsx)("div",{className:"step-number",children:"1"}),(0,l.jsx)("div",{className:"step-icon",children:"\ud83d\udd0d"}),(0,l.jsx)("h4",{className:"step-title",children:"Search"}),(0,l.jsx)("p",{className:"step-desc",children:"Find the perfect buddy for your needs"})]}),(0,l.jsxs)("div",{className:"step",children:[(0,l.jsx)("div",{className:"step-number",children:"2"}),(0,l.jsx)("div",{className:"step-icon",children:"\ud83d\udcc5"}),(0,l.jsx)("h4",{className:"step-title",children:"Book"}),(0,l.jsx)("p",{className:"step-desc",children:"Schedule at your convenience"})]}),(0,l.jsxs)("div",{className:"step",children:[(0,l.jsx)("div",{className:"step-number",children:"3"}),(0,l.jsx)("div",{className:"step-icon",children:"\u2705"}),(0,l.jsx)("h4",{className:"step-title",children:"Get Help"}),(0,l.jsx)("p",{className:"step-desc",children:"Receive quality assistance"})]})]})]}),(0,l.jsx)("section",{className:"safety-section",children:(0,l.jsxs)("div",{className:"safety-card",children:[(0,l.jsx)("div",{className:"safety-icon",children:"\ud83d\udee1\ufe0f"}),(0,l.jsxs)("div",{className:"safety-content",children:[(0,l.jsx)("h4",{className:"safety-title",children:"Your Safety, Our Priority"}),(0,l.jsx)("p",{className:"safety-text",children:"All buddies are verified and background checked"})]})]})})]}),(0,l.jsx)(u,{}),(0,l.jsx)(d,{isOpen:N,onClose:()=>j(!1),onLocationSelect:()=>j(!1)})]})}},788:(e,s,a)=>{a.d(s,{A:()=>r});var t=a(43),n=a(615),i=a(196),o=a(667),c=a(579);const r=e=>{let{userName:s,onLocationClick:a}=e;const r=(0,n.Zp)(),[l,d]=(0,t.useState)(""),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)("Sector 62, Noida"),[v,g]=(0,t.useState)(null),[x,N]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=()=>{try{const e=localStorage.getItem("userLocation");if(e){const s=JSON.parse(e);(null!==s&&void 0!==s&&s.address||null!==s&&void 0!==s&&s.name)&&p(s.address||s.name)}}catch(e){}};e();const s=()=>e(),a=s=>{try{const a=null===s||void 0===s?void 0:s.detail;a&&(a.address||a.name)?p(a.address||a.name):e()}catch(a){e()}};return window.addEventListener("userLocationUpdated",a),window.addEventListener("locationUpdated",a),window.addEventListener("storage",s),()=>{window.removeEventListener("userLocationUpdated",a),window.removeEventListener("locationUpdated",a),window.removeEventListener("storage",s)}},[]),(0,t.useEffect)(()=>{const e=i.j2.onAuthStateChanged(async e=>{if(!e)return g(null),void N(!1);try{const s=await(0,o.x7)((0,o.H9)(i.db,"users",e.uid)),a=(s.exists()?s.data():{}).photoURL||e.photoURL||null;g(a),N(!1)}catch(s){g(null)}});return()=>e()},[]);return(0,c.jsxs)("header",{className:"app-header",children:[(0,c.jsxs)("div",{className:"header-container",children:[(0,c.jsx)("button",{className:"menu-btn",onClick:()=>r("/settings"),"aria-label":"Menu",children:(0,c.jsx)("span",{className:"menu-icon",children:"\u2630"})}),(0,c.jsxs)("div",{className:"header-logo",onClick:()=>r("/"),children:[(0,c.jsx)("img",{src:"/buddy_logo.png",alt:"Buddy",className:"logo-img"}),(0,c.jsx)("span",{className:"logo-text",children:"Buddy"})]}),(0,c.jsxs)("div",{role:"button",className:"location-bar",onClick:()=>"function"===typeof a?a():r("/select-location"),"aria-label":"Location",children:[(0,c.jsx)("span",{className:"loc-pin",children:"\ud83d\udccd"}),(0,c.jsxs)("div",{className:"loc-texts",id:"header-location",children:[(0,c.jsx)("div",{className:"loc-label",children:"Coming to"}),(0,c.jsxs)("div",{className:"loc-main",children:[(0,c.jsx)("span",{className:"loc-name",id:"header-location-name",children:h}),(0,c.jsx)("span",{className:"loc-caret",children:"\u25be"})]})]}),(0,c.jsxs)("div",{className:"loc-meta",children:[(0,c.jsx)("span",{className:"loc-dot"}),(0,c.jsx)("span",{className:"loc-eta",children:"10 mins"})]})]}),(0,c.jsx)("form",{className:"search-form",onSubmit:e=>{e.preventDefault(),l.trim()},children:(0,c.jsxs)("div",{className:"search-container",children:[(0,c.jsx)("span",{className:"search-icon",children:"\ud83d\udd0d"}),(0,c.jsx)("input",{type:"text",className:"search-input",placeholder:"Search for services...",value:l,onChange:e=>d(e.target.value)})]})}),(0,c.jsxs)("button",{className:"profile-btn",onClick:()=>r("/settings"),"aria-label":"Profile",children:[v&&!x?(0,c.jsx)("img",{src:v,alt:"Profile",className:"header-avatar",onError:()=>N(!0),width:28,height:28}):(0,c.jsx)("svg",{className:"profile-icon-svg",viewBox:"0 0 24 24",width:"20",height:"20","aria-hidden":"true",children:(0,c.jsx)("path",{d:"M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z"})}),s&&(0,c.jsx)("span",{className:"profile-label",title:s,children:s.split(" ")[0]})]})]}),u&&(0,c.jsxs)("div",{className:"dropdown-menu",children:[(0,c.jsx)("div",{className:"menu-overlay",onClick:()=>m(!1)}),(0,c.jsxs)("div",{className:"menu-content",children:[(0,c.jsx)("button",{onClick:()=>{r("/"),m(!1)},children:"\ud83c\udfe0 Home"}),(0,c.jsx)("button",{onClick:()=>{r("/bookings"),m(!1)},children:"\ud83d\udcc5 My Bookings"}),(0,c.jsx)("button",{onClick:()=>{r("/become-buddy"),m(!1)},children:"\ud83e\udd1d Become a Buddy"}),(0,c.jsx)("button",{onClick:()=>{r("/help"),m(!1)},children:"\u2753 Help & Support"}),(0,c.jsx)("button",{onClick:()=>{r("/settings"),m(!1)},children:"\u2699\ufe0f Settings"})]})]})]})}}}]);
//# sourceMappingURL=733.c8692469.chunk.js.map