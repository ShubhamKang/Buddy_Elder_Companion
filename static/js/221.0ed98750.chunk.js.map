{"version":3,"file":"static/js/221.0ed98750.chunk.js","mappings":"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","sources":["pages/Profile.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { auth, db } from '../firebase';\nimport { doc, getDoc, setDoc, deleteDoc } from 'firebase/firestore';\nimport './Profile.css';\n\nconst Profile = () => {\n  const navigate = useNavigate();\n  const [form, setForm] = useState({ fullName: '', mobileNumber: '', email: '' });\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n\n  useEffect(() => {\n    const unsub = auth.onAuthStateChanged(async (user) => {\n      if (!user) {\n        setLoading(false);\n        return;\n      }\n      try {\n        const snap = await getDoc(doc(db, 'users', user.uid));\n        if (snap.exists()) {\n          const data = snap.data();\n          setForm({\n            fullName: data.fullName || '',\n            mobileNumber: data.mobileNumber || (user.phoneNumber || '').replace('+91', ''),\n            email: data.email || ''\n          });\n        } else {\n          setForm({\n            fullName: user.displayName || '',\n            mobileNumber: (user.phoneNumber || '').replace('+91', ''),\n            email: user.email || ''\n          });\n        }\n      } catch (_) {}\n      setLoading(false);\n    });\n    return () => unsub();\n  }, []);\n\n  const handleChange = (field, value) => setForm((p) => ({ ...p, [field]: value }));\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!form.fullName.trim()) return;\n    setSaving(true);\n    try {\n      const user = auth.currentUser;\n      if (!user) return;\n      const ref = doc(db, 'users', user.uid);\n      await setDoc(\n        ref,\n        {\n          fullName: form.fullName.trim(),\n          mobileNumber: form.mobileNumber,\n          email: form.email.trim()\n        },\n        { merge: true }\n      );\n      alert('Profile updated');\n      navigate(-1);\n    } catch (err) {\n      console.error(err);\n      alert('Failed to update profile. Please try again.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const confirmDelete = async () => {\n    try {\n      const user = auth.currentUser;\n      if (!user) return;\n      await deleteDoc(doc(db, 'users', user.uid));\n      try {\n        await user.delete();\n      } catch (e) {\n        console.warn('Auth deletion needs recent login. Only data removed.', e);\n      }\n      await auth.signOut();\n      navigate('/');\n    } catch (e) {\n      console.error(e);\n      alert('Could not delete account. Please try again later.');\n    }\n  };\n\n  if (loading) return null;\n\n  return (\n    <div className=\"profile-page\">\n      <div className=\"profile-header\">\n        <button className=\"back-btn\" onClick={() => navigate('/home')}>‚Üê</button>\n        <h2>Profile</h2>\n      </div>\n\n      <form className=\"profile-form\" onSubmit={handleSubmit}>\n        <label className=\"label\">Name *</label>\n        <input\n          className=\"input\"\n          type=\"text\"\n          value={form.fullName}\n          onChange={(e) => handleChange('fullName', e.target.value)}\n          placeholder=\"Your name\"\n          required\n        />\n\n        <label className=\"label\">Mobile Number *</label>\n        <input\n          className=\"input\"\n          type=\"tel\"\n          value={form.mobileNumber}\n          onChange={(e) => handleChange('mobileNumber', e.target.value)}\n          placeholder=\"Mobile number\"\n          inputMode=\"numeric\"\n          readOnly\n        />\n\n        <label className=\"label\">Email Address *</label>\n        <input\n          className=\"input\"\n          type=\"email\"\n          value={form.email}\n          onChange={(e) => handleChange('email', e.target.value)}\n          placeholder=\"Enter your email\"\n          required\n        />\n\n        <button className=\"submit-btn\" type=\"submit\" disabled={saving || !form.fullName.trim()}>\n          {saving ? 'Saving...' : 'Submit'}\n        </button>\n      </form>\n\n      <hr className=\"divider\" />\n\n      <div className=\"delete-section\">\n        <div className=\"delete-title\">Delete Account</div>\n        <p className=\"delete-note\">\n          Deleting your account will remove all your orders, wallet amount and any active referral.\n        </p>\n        <button className=\"delete-btn\" onClick={() => setShowDeleteConfirm(true)}>Delete</button>\n      </div>\n\n      {showDeleteConfirm && (\n        <div className=\"modal-overlay\" role=\"dialog\" aria-modal=\"true\" onClick={() => setShowDeleteConfirm(false)}>\n          <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\n            <h3 className=\"modal-title\">Delete account?</h3>\n            <p className=\"modal-text\">This action cannot be undone.</p>\n            <div className=\"modal-actions\">\n              <button className=\"btn-secondary\" onClick={() => setShowDeleteConfirm(false)}>Cancel</button>\n              <button className=\"btn-danger\" onClick={confirmDelete}>Delete</button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Profile;\n\n\n"],"names":["Profile","navigate","useNavigate","form","setForm","useState","fullName","mobileNumber","email","loading","setLoading","saving","setSaving","showDeleteConfirm","setShowDeleteConfirm","useEffect","unsub","auth","onAuthStateChanged","async","user","snap","getDoc","doc","db","uid","exists","data","phoneNumber","replace","displayName","_","handleChange","field","value","p","_jsxs","className","children","_jsx","onClick","onSubmit","e","preventDefault","trim","currentUser","ref","setDoc","merge","alert","err","console","error","type","onChange","target","placeholder","required","inputMode","readOnly","disabled","role","stopPropagation","deleteDoc","delete","warn","signOut"],"sourceRoot":""}