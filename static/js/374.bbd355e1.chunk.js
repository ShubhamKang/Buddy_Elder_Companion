"use strict";(self.webpackChunkreact_website=self.webpackChunkreact_website||[]).push([[374],{374:(e,a,t)=>{t.r(a),t.d(a,{default:()=>m});var l=t(43),s=t(615),n=t(196),r=t(667),i=t(130),o=t(788),c=t(579);const d={transport:{label:"Transport",icon:"\ud83d\ude97",color:"#3b82f6",fields:[{name:"pickup",label:"Pickup Address",type:"text",required:!0,placeholder:"Where should we pick you up?"},{name:"drop",label:"Drop Address",type:"text",required:!0,placeholder:"Your destination address"},{name:"rideTime",label:"Preferred Time",type:"datetime-local",required:!1},{name:"passengers",label:"Passengers",type:"number",min:1,placeholder:"1"},{name:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any special requirements?"}]},repair:{label:"Repair",icon:"\ud83d\udd27",color:"#10b981",fields:[{name:"appliance",label:"What needs repair?",type:"text",required:!0,placeholder:"Fan, AC, Fridge, Faucet..."},{name:"issue",label:"Describe the issue",type:"textarea",required:!0,placeholder:"What seems to be the problem?"},{name:"urgency",label:"Urgency",type:"select",required:!0,options:["Normal","Urgent","Emergency"]},{name:"preferredTime",label:"Preferred Time",type:"datetime-local"}]},education:{label:"Education",icon:"\ud83d\udcda",color:"#8b5cf6",fields:[{name:"subject",label:"Subject",type:"text",required:!0,placeholder:"Maths, Science, English..."},{name:"grade",label:"Grade/Level",type:"text",required:!0,placeholder:"e.g., Class 10 / Undergraduate"},{name:"mode",label:"Mode",type:"select",required:!0,options:["Online","Offline"]},{name:"sessionsPerWeek",label:"Sessions per week",type:"number",min:1,placeholder:"3"}]},home:{label:"Home Help",icon:"\ud83c\udfe0",color:"#f59e0b",fields:[{name:"serviceType",label:"Service Type",type:"select",required:!0,options:["Cleaning","Cooking","Baby Sitting","Elderly Care","Gardening"]},{name:"hours",label:"Hours Needed",type:"number",min:1,placeholder:"2"},{name:"schedule",label:"Schedule",type:"select",options:["One-time","Daily","Weekly","Monthly"]},{name:"notes",label:"Details",type:"textarea",placeholder:"Share any preferences or instructions"}]},business:{label:"Business",icon:"\ud83d\udcbc",color:"#6366f1",fields:[{name:"requirement",label:"Requirement",type:"text",required:!0,placeholder:"Accounting, Data Entry, Marketing..."},{name:"companyName",label:"Company Name (Optional)",type:"text"},{name:"budget",label:"Budget (Optional)",type:"text",placeholder:"\u20b9 e.g., 5000"}]},fitness:{label:"Fitness",icon:"\ud83c\udfcb\ufe0f",color:"#ef4444",fields:[{name:"goal",label:"Fitness Goal",type:"text",required:!0,placeholder:"Weight loss, Strength, Mobility..."},{name:"location",label:"Training Location",type:"select",options:["Home","Gym","Outdoor"]},{name:"sessionLength",label:"Session Length (mins)",type:"number",min:15,placeholder:"60"}]},shopping:{label:"Shopping",icon:"\ud83d\uded2",color:"#14b8a6",fields:[{name:"items",label:"Items List",type:"textarea",required:!0,placeholder:"List items you need with quantities"},{name:"store",label:"Preferred Store (Optional)",type:"text"},{name:"deliverBy",label:"Deliver By",type:"datetime-local"}]},more:{label:"Other",icon:"\u2795",color:"#64748b",fields:[{name:"title",label:"Service Title",type:"text",required:!0,placeholder:"What do you need help with?"},{name:"details",label:"Details",type:"textarea",required:!0,placeholder:"Describe your requirement"}]}},m=()=>{const{id:e}=(0,s.g)(),a=(0,s.Zp)(),[t,m]=(0,l.useState)(""),[u,p]=(0,l.useState)(""),[h,b]=(0,l.useState)([]),[x,g]=(0,l.useState)(!1),[y,v]=(0,l.useState)({}),f=(0,l.useMemo)(()=>d[e]||d.more,[e]),[j,N]=(0,l.useState)(()=>{const e={};return(f.fields||[]).forEach(a=>{e[a.name]=(a.type,"")}),e.preferredDate="",e.locationNote="",e.budget="",e});(0,l.useEffect)(()=>{const e=n.j2.onAuthStateChanged(async e=>{if(e)try{const a=await(0,r.x7)((0,r.H9)(n.db,"users",e.uid)),t=a.exists()?a.data():{};m(t.fullName||e.displayName||""),p(t.mobileNumber||(e.phoneNumber||"").replace("+91","")||"")}catch(a){}});return()=>e()},[]);const S=(e,a)=>{N(t=>({...t,[e]:a})),y[e]&&v(a=>({...a,[e]:""}))};return(0,c.jsxs)("div",{className:"category-form-page",children:[(0,c.jsx)(o.A,{userName:t}),(0,c.jsx)("main",{className:"category-form-content",children:(0,c.jsxs)("form",{className:"category-card",onSubmit:async l=>{if(l.preventDefault(),(()=>{const e={};return(f.fields||[]).forEach(a=>{a.required&&!String(j[a.name]||"").trim()&&(e[a.name]="Required")}),v(e),0===Object.keys(e).length})()){g(!0);try{const l=n.j2.currentUser,o=localStorage.getItem("userLocation");let c=null;try{c=o?JSON.parse(o):null}catch(s){}let d={successful:[],failed:[]};h.length>0&&(d=await(0,i.lZ)(h,`service-attachments/${e}`,(null===l||void 0===l?void 0:l.uid)||u||"anon"));const m={categoryId:e,categoryLabel:f.label,icon:f.icon,color:f.color,form:j,attachments:d.successful,attachmentErrors:d.failed,user:{uid:(null===l||void 0===l?void 0:l.uid)||null,name:t,mobileNumber:u},location:c?{address:c.address||c.name||"",lat:c.lat||null,lng:c.lng||null}:null,status:"new",createdAt:(0,r.O5)()};await(0,r.gS)((0,r.rJ)(n.db,"serviceRequests"),m),alert("\u2705 Request submitted! We will notify nearby buddies."),a("/home")}catch(o){console.error(o),alert("Failed to submit. Please try again.")}finally{g(!1)}}},children:[(0,c.jsxs)("div",{className:"category-header",style:{"--cat-color":f.color},children:[(0,c.jsx)("div",{className:"cat-icon","aria-hidden":!0,children:f.icon}),(0,c.jsxs)("div",{className:"cat-titles",children:[(0,c.jsx)("h2",{className:"cat-title",children:f.label}),(0,c.jsx)("p",{className:"cat-subtitle",children:"Tell us what you need. We will route this to the best buddy."})]})]}),(0,c.jsxs)("div",{className:"fields-grid",children:[(f.fields||[]).map(e=>(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsxs)("label",{className:"label",htmlFor:e.name,children:[e.label,e.required?" *":""]}),"textarea"===e.type?(0,c.jsx)("textarea",{id:e.name,className:"input textarea "+(y[e.name]?"error":""),placeholder:e.placeholder||"",value:j[e.name],onChange:a=>S(e.name,a.target.value),rows:4}):"select"===e.type?(0,c.jsxs)("select",{id:e.name,className:"input select "+(y[e.name]?"error":""),value:j[e.name],onChange:a=>S(e.name,a.target.value),children:[(0,c.jsx)("option",{value:"",children:"Select"}),(e.options||[]).map(e=>(0,c.jsx)("option",{value:e,children:e},e))]}):(0,c.jsx)("input",{id:e.name,type:e.type,className:"input "+(y[e.name]?"error":""),placeholder:e.placeholder||"",value:j[e.name],min:e.min,onChange:a=>S(e.name,a.target.value)}),y[e.name]&&(0,c.jsx)("span",{className:"hint error-text",children:y[e.name]})]},e.name)),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"label",htmlFor:"preferredDate",children:"Preferred Date"}),(0,c.jsx)("input",{id:"preferredDate",type:"date",className:"input",value:j.preferredDate,onChange:e=>S("preferredDate",e.target.value)})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"label",htmlFor:"budget",children:"Budget (Optional)"}),(0,c.jsx)("input",{id:"budget",type:"text",className:"input",placeholder:"\u20b9 Approx budget",value:j.budget,onChange:e=>S("budget",e.target.value)})]}),(0,c.jsxs)("div",{className:"form-group full",children:[(0,c.jsx)("label",{className:"label",children:"Attachments (Optional)"}),(0,c.jsxs)("div",{className:"upload-area",children:[(0,c.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const a=Array.from(e.target.files||[]);a.length&&b(e=>[...e,...a])}}),(0,c.jsx)("span",{className:"upload-hint",children:"Add photos to explain your request better"})]}),h.length>0&&(0,c.jsx)("div",{className:"attachments",children:h.map((e,a)=>(0,c.jsxs)("div",{className:"chip",children:[(0,c.jsx)("span",{children:e.name}),(0,c.jsx)("button",{type:"button",onClick:()=>{return e=a,void b(a=>a.filter((a,t)=>t!==e));var e},"aria-label":"Remove",children:"\xd7"})]},a))})]})]}),(0,c.jsxs)("div",{className:"actions",children:[(0,c.jsx)("button",{type:"button",className:"btn secondary",onClick:()=>a("/home"),children:"Cancel"}),(0,c.jsx)("button",{type:"submit",className:"btn primary",disabled:x,children:x?"Submitting...":"Submit Request"})]})]})})]})}},788:(e,a,t)=>{t.d(a,{A:()=>o});var l=t(43),s=t(615),n=t(196),r=t(667),i=t(579);const o=e=>{let{userName:a,onLocationClick:t}=e;const o=(0,s.Zp)(),[c,d]=(0,l.useState)(""),[m,u]=(0,l.useState)(!1),[p,h]=(0,l.useState)("Sector 62, Noida"),[b,x]=(0,l.useState)(null),[g,y]=(0,l.useState)(!1);(0,l.useEffect)(()=>{const e=()=>{try{const e=localStorage.getItem("userLocation");if(e){const a=JSON.parse(e);(null!==a&&void 0!==a&&a.address||null!==a&&void 0!==a&&a.name)&&h(a.address||a.name)}}catch(e){}};e();const a=()=>e(),t=a=>{try{const t=null===a||void 0===a?void 0:a.detail;t&&(t.address||t.name)?h(t.address||t.name):e()}catch(t){e()}};return window.addEventListener("userLocationUpdated",t),window.addEventListener("locationUpdated",t),window.addEventListener("storage",a),()=>{window.removeEventListener("userLocationUpdated",t),window.removeEventListener("locationUpdated",t),window.removeEventListener("storage",a)}},[]),(0,l.useEffect)(()=>{const e=n.j2.onAuthStateChanged(async e=>{if(!e)return x(null),void y(!1);try{const a=await(0,r.x7)((0,r.H9)(n.db,"users",e.uid)),t=(a.exists()?a.data():{}).photoURL||e.photoURL||null;x(t),y(!1)}catch(a){x(null)}});return()=>e()},[]);return(0,i.jsxs)("header",{className:"app-header",children:[(0,i.jsxs)("div",{className:"header-container",children:[(0,i.jsx)("button",{className:"menu-btn",onClick:()=>o("/settings"),"aria-label":"Menu",children:(0,i.jsx)("span",{className:"menu-icon",children:"\u2630"})}),(0,i.jsxs)("div",{className:"header-logo",onClick:()=>o("/"),children:[(0,i.jsx)("img",{src:"/buddy_logo.png",alt:"Buddy",className:"logo-img"}),(0,i.jsx)("span",{className:"logo-text",children:"Buddy"})]}),(0,i.jsxs)("div",{role:"button",className:"location-bar",onClick:()=>"function"===typeof t?t():o("/select-location"),"aria-label":"Location",children:[(0,i.jsx)("span",{className:"loc-pin",children:"\ud83d\udccd"}),(0,i.jsxs)("div",{className:"loc-texts",id:"header-location",children:[(0,i.jsx)("div",{className:"loc-label",children:"Coming to"}),(0,i.jsxs)("div",{className:"loc-main",children:[(0,i.jsx)("span",{className:"loc-name",id:"header-location-name",children:p}),(0,i.jsx)("span",{className:"loc-caret",children:"\u25be"})]})]}),(0,i.jsxs)("div",{className:"loc-meta",children:[(0,i.jsx)("span",{className:"loc-dot"}),(0,i.jsx)("span",{className:"loc-eta",children:"10 mins"})]})]}),(0,i.jsx)("form",{className:"search-form",onSubmit:e=>{e.preventDefault(),c.trim()},children:(0,i.jsxs)("div",{className:"search-container",children:[(0,i.jsx)("span",{className:"search-icon",children:"\ud83d\udd0d"}),(0,i.jsx)("input",{type:"text",className:"search-input",placeholder:"Search for services...",value:c,onChange:e=>d(e.target.value)})]})}),(0,i.jsxs)("button",{className:"profile-btn",onClick:()=>o("/settings"),"aria-label":"Profile",children:[b&&!g?(0,i.jsx)("img",{src:b,alt:"Profile",className:"header-avatar",onError:()=>y(!0),width:28,height:28}):(0,i.jsx)("svg",{className:"profile-icon-svg",viewBox:"0 0 24 24",width:"20",height:"20","aria-hidden":"true",children:(0,i.jsx)("path",{d:"M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z"})}),a&&(0,i.jsx)("span",{className:"profile-label",title:a,children:a.split(" ")[0]})]})]}),m&&(0,i.jsxs)("div",{className:"dropdown-menu",children:[(0,i.jsx)("div",{className:"menu-overlay",onClick:()=>u(!1)}),(0,i.jsxs)("div",{className:"menu-content",children:[(0,i.jsx)("button",{onClick:()=>{o("/"),u(!1)},children:"\ud83c\udfe0 Home"}),(0,i.jsx)("button",{onClick:()=>{o("/bookings"),u(!1)},children:"\ud83d\udcc5 My Bookings"}),(0,i.jsx)("button",{onClick:()=>{o("/become-buddy"),u(!1)},children:"\ud83e\udd1d Become a Buddy"}),(0,i.jsx)("button",{onClick:()=>{o("/help"),u(!1)},children:"\u2753 Help & Support"}),(0,i.jsx)("button",{onClick:()=>{o("/settings"),u(!1)},children:"\u2699\ufe0f Settings"})]})]})]})}}}]);
//# sourceMappingURL=374.bbd355e1.chunk.js.map